<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Decentralized Programmer</title>

    <!-- <link rel="stylesheet" type="text/css" href="main.css"> -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <script src="./node_modules/web3/dist/web3.min.js"></script>
    <script>
    var web3;
    var Person;

    function loadWeb3(){

       if (typeof web3 !== 'undefined') {
           web3 = new Web3(web3.currentProvider);
           console.log("aaa");
       } else {
           // set the provider you want from Web3.providers
           web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
           console.log("bb");
       }

       web3.version.getNetwork((err, netId) => {
  switch (netId) {
    case "1":
      console.log('This is mainnet')
      break
    case "2":
      console.log('This is the deprecated Morden test network.')
      break
    case "3":
      console.log('This is the ropsten test network.')
      break
    case "4":
      console.log('This is the Rinkeby test network.')
      break
    case "42":
      console.log('This is the Kovan test network.')
      break
    default:
      console.log('This is an unknown network.')
  }
})


        web3.eth.defaultAccount = web3.eth.accounts[0];
        console.log(web3.eth.defaultAccount);
        // web3.eth.getBalance(web3.eth.defaultAccount).then(function(res,err){
        //   console.log(res,err);
        // })



        var PersonContract = web3.eth.contract([
	{
		"constant": false,
		"inputs": [],
		"name": "kill",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "message",
				"type": "string"
			},
			{
				"indexed": false,
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Log",
		"type": "event"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_title",
				"type": "string"
			},
			{
				"name": "_fName",
				"type": "string"
			},
			{
				"name": "_lName",
				"type": "string"
			}
		],
		"name": "setPerson",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"payable": true,
		"stateMutability": "payable",
		"type": "fallback"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getHighestBidderPerson",
		"outputs": [
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getLastBidderPerson",
		"outputs": [
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "owner",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
]);

  Person = PersonContract.at('0x295699b636c6ef85f2c71d78ca086aa15bc628ea');
  console.log(Person);
  }

 </script>


</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-light bg-light">
  <ul class="nav">
    <li class="nav-item"> <a class="nav-link" href="http://izotx.com">Decentralized Programmer</a> </li>
    <li class="nav-item"><a class="nav-link" href="https://twitter.com/appzzman"><i class="fa fa-twitter"></i></a></li>
    <li class="nav-item"><a class="nav-link" href="https://github.com/izotx/"><i class="fa fa-github"></i></a></li>
    <li class="nav-item"><a class="nav-link" href="https://www.linkedin.com/in/chudzynski/"><i class="fa fa-linkedin"></i></a></li>
  </ul>
</nav>
    <div class="container">
    <div class="row">
      <p class="small text-muted">Become a part of the decentralized world! Save your name on the blockchain to make sure it will be never forgotten! </p>
      <!-- <div class="col-2"> </div> -->

      <div class="col-8">



    <div class="card text-white bg-success" >
    <div class="card-header">
        Featured Highest Bidder
    </div>
   <div class="card-body">

    <table class="table">
    <thead>
    <tr>
      <th scope="col">Title</th>
      <th scope="col">First Name</th>
      <th scope="col">Last Name</th>
      <th scope="col">Bid</th>
    </tr>
    </thead>
  <tbody>
  <tr>
    <td id="hightitle"></td>
    <td id="highname"> </td>
    <td id="highlastname"></td>
    <td id="highbid"></td>
  </tr>
</table>
</div>
</div>
</div>
      <!-- <div class="col-2"> </div> -->

      <div class="col-4">
      <div class="card text-gray">
      <div class="card-header small">
          Last Person
      </div>
     <div class="card-body">

       <ul class="list-group list-group-flush">
       <li class="list-group-item small text-muted" id="last_title">Title</li>
       <li class="list-group-item small text-muted" id="last_firstname">First Name</li>
       <li class="list-group-item small text-muted" id="last_lastname">Last Name</li>
       <li class="list-group-item small text-muted" id="last_bid">Bid</li>
      </ul>


    </div>
    </div>
    </div>


</div>
<br>

    <div class="row">


<div class="col-8">
<div class="card text-gray" >
  <div class="card-header">
      Enter Your Information
  </div>
 <div class="card-body">
      <div class="input-group mb-3">
        <input id="title" type="text"  class="form-control" placeholder="Title"/>
      </div>

      <div class="input-group mb-3">
        <input id="firstname" type="text"  class="form-control" placeholder="First Name"/>
      </div>

      <div class="input-group mb-3">
        <input id="lastname" type="text"  class="form-control" placeholder="Last Name"/>
      </div>
        <button  class="btn btn-primary" id="savebutton">Save your name!</button>
    </div>
  </div>
  </div>




  </div>
</div>
    <!-- <footer class="container">
      <ul class="nav navbar-nav">
        <li><a href="https://twitter.com/appzzman"><i class="fa fa-twitter"></i></a></li>
        <li><a href="https://github.com/izotx/"><i class="fa fa-github"></i></a></li>
        <li><a href="https://www.linkedin.com/in/chudzynski/"><i class="fa fa-linkedin"></i></a></li>
      </ul>
    </footer> -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script>
       // Our future code here..
       $(function() {
          loadWeb3();
           // Code here
           $("#savebutton").click(function(){
                var title = $("#title").val();
                var firstname = $("#firstname").val();
                var lastname = $("#lastname").val();

                Person.setPerson(title,firstname,lastname,function(error,result){
                    console.log(error);
                    console.log(result);
                  })
           });
       });


    </script>

</body>
</html>
